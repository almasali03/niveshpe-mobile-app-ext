<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create New Pot - NiveshPe</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
          /* Color System */
          --color-bg-primary: #F5F7FA;
          --color-bg-secondary: #FFFFFF;
          --color-card: #FFFFFF;
          --color-surface: #F8F9FA;
          --color-border: #E5E7EB;

          /* Brand Colors */
          --color-blue: #2563EB;
          --color-blue-dark: #1D4ED8;
          --color-blue-light: #3B82F6;
          --color-green: #10B981;
          --color-green-light: #34D399;
          --color-green-dark: #059669;
          --color-orange: #F59E0B;
          --color-purple: #8B5CF6;
          --color-pink: #EC4899;
          --color-red: #EF4444;
          --color-cyan: #06B6D4;

          /* Text Colors */
          --color-text-primary: #1F2937;
          --color-text-secondary: #6B7280;
          --color-text-muted: #9CA3AF;
          --color-text-white: #FFFFFF;

          /* Typography */
          --font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;

          /* Shadows */
          --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
          --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
          --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
          --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);

          /* Border Radius */
          --radius-sm: 8px;
          --radius-md: 12px;
          --radius-lg: 16px;
          --radius-xl: 20px;
          --radius-2xl: 24px;
          --radius-full: 9999px;

          /* Spacing System */
          --space-xs: 8px;
          --space-sm: 12px;
          --space-md: 16px;
          --space-lg: 20px;
          --space-xl: 24px;
          --space-2xl: 32px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--color-text-primary);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            min-height: 100vh;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 20px;
        }

        .iphone-frame {
            width: 380px;
            height: 820px;
            background: transparent;
            margin: 0 auto;
        }

        .iphone-screen {
            width: 100%;
            height: 100%;
            background: var(--color-bg-primary);
            overflow: hidden;
        }

        .mobile-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        /* Status Bar */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            background: white;
            font-size: 15px;
            font-weight: 600;
            height: 44px;
            flex-shrink: 0;
        }

        .status-icons {
            display: flex;
            gap: 6px;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background: white;
            border-bottom: 1px solid var(--color-border);
            flex-shrink: 0;
        }

        .back-btn {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background: var(--color-surface);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .back-btn:active {
            background: var(--color-border);
            transform: scale(0.95);
        }

        .header-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--color-text-primary);
        }

        .step-indicator {
            font-size: 12px;
            font-weight: 600;
            color: var(--color-text-muted);
            background: var(--color-surface);
            padding: 6px 12px;
            border-radius: var(--radius-full);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            overflow-y: auto;
            scrollbar-width: none;
            background: var(--color-bg-primary);
        }

        .main-content::-webkit-scrollbar {
            display: none;
        }

        /* Step Containers */
        .step-container {
            display: none;
            padding: var(--space-xl);
            animation: slideIn 0.3s ease-out;
        }

        .step-container.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Section Title */
        .section-title {
            font-size: 24px;
            font-weight: 800;
            color: var(--color-text-primary);
            margin-bottom: var(--space-xl);
        }

        /* Goal Grid */
        .goal-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
        }

        .goal-card {
            background: white;
            border: 2px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .goal-card:active {
            transform: scale(0.95);
        }

        .goal-card.selected {
            border-color: var(--color-blue);
            background: rgba(37, 99, 235, 0.05);
        }

        .goal-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .goal-name {
            font-size: 13px;
            font-weight: 600;
            color: var(--color-text-primary);
            text-align: center;
        }

        /* Goal Summary */
        .goal-summary {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            background: white;
            padding: var(--space-md);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-xl);
            border: 1px solid var(--color-border);
        }

        .goal-summary-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .goal-summary-text {
            flex: 1;
        }

        .goal-summary-name {
            font-size: 16px;
            font-weight: 700;
            color: var(--color-text-primary);
        }

        .goal-summary-meta {
            font-size: 13px;
            color: var(--color-text-secondary);
            margin-top: 2px;
        }

        /* Duration Section */
        .duration-section {
            margin-bottom: var(--space-xl);
        }

        .section-label {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: var(--space-md);
        }

        .duration-display {
            text-align: center;
            padding: var(--space-lg);
            background: white;
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-md);
            border: 1px solid var(--color-border);
        }

        .duration-value {
            font-size: 32px;
            font-weight: 800;
            color: var(--color-blue);
        }

        .duration-label {
            font-size: 13px;
            color: var(--color-text-secondary);
            margin-top: 4px;
        }

        .duration-slider {
            width: 100%;
            height: 6px;
            border-radius: var(--radius-full);
            background: var(--color-surface);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        .duration-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--color-blue);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
        }

        .duration-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--color-blue);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
        }

        .duration-range {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--color-text-muted);
            margin-top: var(--space-xs);
        }

        /* Target Amount */
        .target-input-wrapper {
            background: white;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--space-md);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-xl);
        }

        .target-input-wrapper:focus-within {
            border-color: var(--color-blue);
        }

        .currency-symbol {
            font-size: 20px;
            font-weight: 600;
            color: var(--color-text-secondary);
        }

        .target-input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 18px;
            font-weight: 600;
            color: var(--color-text-primary);
            font-family: var(--font-family);
        }

        .target-input::placeholder {
            color: var(--color-text-muted);
        }

        /* Recommendation Card */
        .recommendation-card {
            background: linear-gradient(135deg, #2563EB 0%, #10B981 100%);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            color: white;
            margin-bottom: var(--space-xl);
        }

        .recommendation-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .recommendation-icon {
            font-size: 20px;
        }

        .recommendation-title {
            font-size: 13px;
            font-weight: 600;
            opacity: 0.9;
        }

        .recommendation-fund-name {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: var(--space-xs);
        }

        .recommendation-returns {
            font-size: 14px;
            font-weight: 600;
            opacity: 0.9;
            margin-bottom: var(--space-sm);
        }

        .recommendation-description {
            font-size: 13px;
            opacity: 0.85;
            line-height: 1.5;
        }

        /* Frequency Tabs */
        .frequency-tabs {
            display: flex;
            gap: var(--space-xs);
            margin-bottom: var(--space-xl);
        }

        .frequency-btn {
            flex: 1;
            padding: 10px 16px;
            border-radius: var(--radius-full);
            border: 1px solid var(--color-border);
            background: white;
            font-size: 14px;
            font-weight: 600;
            color: var(--color-text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .frequency-btn.active {
            border-color: var(--color-blue);
            color: var(--color-blue);
            background: rgba(37, 99, 235, 0.1);
        }

        .frequency-btn:active {
            transform: scale(0.95);
        }

        /* Amount Input */
        .amount-section {
            margin-bottom: var(--space-xl);
        }

        .amount-display {
            background: white;
            border: 2px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .amount-display:focus-within {
            border-color: var(--color-blue);
        }

        .amount-input {
            border: none;
            outline: none;
            font-size: 36px;
            font-weight: 800;
            color: var(--color-text-primary);
            font-family: var(--font-family);
            text-align: center;
            width: 200px;
        }

        .amount-input::placeholder {
            color: var(--color-text-muted);
        }

        /* Quick Amounts */
        .quick-amounts {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-xs);
            margin-bottom: var(--space-xl);
        }

        .amount-btn {
            padding: 10px;
            border-radius: var(--radius-md);
            border: 1px solid var(--color-border);
            background: white;
            font-size: 13px;
            font-weight: 600;
            color: var(--color-text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .amount-btn.active {
            border-color: var(--color-blue);
            color: var(--color-blue);
            background: rgba(37, 99, 235, 0.05);
        }

        .amount-btn:active {
            transform: scale(0.95);
        }

        /* Projection Card */
        .projection-card {
            background: linear-gradient(135deg, #34D399 0%, #10B981 100%);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            color: white;
            margin-bottom: var(--space-xl);
        }

        .projection-header {
            font-size: 13px;
            font-weight: 600;
            opacity: 0.9;
            margin-bottom: var(--space-md);
        }

        .projection-amount {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: var(--space-xs);
        }

        .projection-growth {
            font-size: 14px;
            font-weight: 600;
            opacity: 0.9;
            margin-bottom: var(--space-md);
        }

        .projection-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-md);
            padding-top: var(--space-md);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .detail-item {
            text-align: center;
        }

        .detail-label {
            font-size: 11px;
            opacity: 0.8;
            margin-bottom: 4px;
        }

        .detail-value {
            font-size: 16px;
            font-weight: 700;
        }

        /* Continue Button */
        .continue-btn {
            width: 100%;
            padding: 16px;
            border-radius: var(--radius-md);
            border: none;
            background: var(--color-blue);
            color: white;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
        }

        .continue-btn:active {
            transform: scale(0.98);
            background: var(--color-blue-dark);
        }

        .continue-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .continue-btn:disabled:active {
            transform: none;
        }

        /* Custom Goal Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            max-width: 340px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: var(--space-xl);
            text-align: center;
        }

        .modal-input-group {
            margin-bottom: var(--space-xl);
        }

        .modal-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: var(--space-sm);
        }

        .modal-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            font-size: 16px;
            font-family: var(--font-family);
            outline: none;
        }

        .modal-input:focus {
            border-color: var(--color-blue);
        }

        .icon-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: var(--space-sm);
        }

        .icon-option {
            width: 100%;
            aspect-ratio: 1;
            border: 2px solid var(--color-border);
            border-radius: var(--radius-md);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            color: var(--color-text-secondary);
        }

        .icon-option:active {
            transform: scale(0.9);
        }

        .icon-option.selected {
            border-color: var(--color-blue);
            background: rgba(37, 99, 235, 0.1);
        }

        .modal-actions {
            display: flex;
            gap: var(--space-sm);
            margin-top: var(--space-xl);
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border-radius: var(--radius-md);
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-btn-cancel {
            background: var(--color-surface);
            color: var(--color-text-secondary);
        }

        .modal-btn-done {
            background: var(--color-blue);
            color: white;
        }

        .modal-btn:active {
            transform: scale(0.95);
        }
    </style>
    <link rel="stylesheet" href="assets/css/iphone-toggle.css">
</head>
<body>
    <!-- Frame Toggle Button -->
    <button class="frame-toggle-btn" id="frameToggleBtn" onclick="toggleFrameMode()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z"/>
        </svg>
        <span id="frameToggleText">Normal View</span>
    </button>


    <div class="iphone-frame">
        <!-- iPhone Notch (Dynamic Island style) -->
        <div class="iphone-notch"></div>


        <div class="iphone-screen">
            <div class="mobile-container">
                <!-- Status Bar -->
                <div class="status-bar">
                    <div>9:41</div>
                    <div class="status-icons">
                        <span>â€¢â€¢â€¢</span>
                        <span>ðŸ“¶</span>
                        <span>ðŸ”‹</span>
                    </div>
                </div>

                <!-- Header -->
                <div class="header">
                    <button class="back-btn" onclick="goBack()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6z"/>
                        </svg>
                    </button>
                    <div class="header-title">Create New Pot</div>
                    <div class="step-indicator" id="stepIndicator">Step 1/3</div>
                </div>

                <!-- Main Content -->
                <div class="main-content">
                    <!-- Step 1: Goal Selection -->
                    <div class="step-container active" id="step1">
                        <h2 class="section-title">What's your goal?</h2>

                        <div class="goal-grid">
                            <div class="goal-card" data-goal="home" data-icon="home" data-color="#2563EB">
                                <div class="goal-icon" style="background: rgba(37, 99, 235, 0.1); color: #2563EB;">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"/>
                                    </svg>
                                </div>
                                <div class="goal-name">Home</div>
                            </div>

                            <div class="goal-card" data-goal="vehicle" data-icon="car" data-color="#10B981">
                                <div class="goal-icon" style="background: rgba(16, 185, 129, 0.1); color: #10B981;">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M5,11L6.5,6.5H17.5L19,11M17.5,16A1.5,1.5 0 0,1 16,14.5A1.5,1.5 0 0,1 17.5,13A1.5,1.5 0 0,1 19,14.5A1.5,1.5 0 0,1 17.5,16M6.5,16A1.5,1.5 0 0,1 5,14.5A1.5,1.5 0 0,1 6.5,13A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 6.5,16M18.92,6C18.72,5.42 18.16,5 17.5,5H6.5C5.84,5 5.28,5.42 5.08,6L3,12V20A1,1 0 0,0 4,21H5A1,1 0 0,0 6,20V19H18V20A1,1 0 0,0 19,21H20A1,1 0 0,0 21,20V12L18.92,6Z"/>
                                    </svg>
                                </div>
                                <div class="goal-name">Vehicle</div>
                            </div>

                            <div class="goal-card" data-goal="marriage" data-icon="ring" data-color="#EC4899">
                                <div class="goal-icon" style="background: rgba(236, 72, 153, 0.1); color: #EC4899;">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M16,9H19L14,16M10,9H14L12,17.5M5,9H8L10,16M15,4L12,2L9,4L6,2L3,4L5.5,9H18.5L21,4L18,2L15,4Z"/>
                                    </svg>
                                </div>
                                <div class="goal-name">Marriage</div>
                            </div>

                            <div class="goal-card" data-goal="education" data-icon="school" data-color="#8B5CF6">
                                <div class="goal-icon" style="background: rgba(139, 92, 246, 0.1); color: #8B5CF6;">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z"/>
                                    </svg>
                                </div>
                                <div class="goal-name">Education</div>
                            </div>

                            <div class="goal-card" data-goal="emergency" data-icon="shield" data-color="#EF4444">
                                <div class="goal-icon" style="background: rgba(239, 68, 68, 0.1); color: #EF4444;">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.1 16,12.7V16.2C16,16.8 15.4,17.3 14.8,17.3H9.2C8.6,17.3 8,16.8 8,16.2V12.8C8,12.2 8.6,11.6 9.2,11.6V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,9.5V11.5H13.5V9.5C13.5,8.7 12.8,8.2 12,8.2Z"/>
                                    </svg>
                                </div>
                                <div class="goal-name">Emergency</div>
                            </div>

                            <div class="goal-card" data-goal="wealth" data-icon="trending-up" data-color="#F59E0B">
                                <div class="goal-icon" style="background: rgba(245, 158, 11, 0.1); color: #F59E0B;">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M16,6L18.29,8.29L13.41,13.17L9.41,9.17L2,16.59L3.41,18L9.41,12L13.41,16L19.71,9.71L22,12V6H16Z"/>
                                    </svg>
                                </div>
                                <div class="goal-name">Wealth</div>
                            </div>

                            <div class="goal-card" data-goal="vacation" data-icon="beach" data-color="#06B6D4">
                                <div class="goal-icon" style="background: rgba(6, 182, 212, 0.1); color: #06B6D4;">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M13.13,14.56L14.56,13.13L21,19.57L19.57,21M7,3C8.11,3 9,3.89 9,5H15A2,2 0 0,1 17,7V21H3V7A2,2 0 0,1 5,5C5,3.89 5.89,3 7,3M7,5A1,1 0 0,0 6,6A1,1 0 0,0 7,7A1,1 0 0,0 8,6A1,1 0 0,0 7,5M18.66,2.41L20.08,3.83L15.08,8.83L13.66,7.41"/>
                                    </svg>
                                </div>
                                <div class="goal-name">Vacation</div>
                            </div>

                            <div class="goal-card" data-goal="custom" data-icon="plus" data-color="#6B7280">
                                <div class="goal-icon" style="background: rgba(107, 114, 128, 0.1); color: #6B7280;">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                                    </svg>
                                </div>
                                <div class="goal-name">Custom</div>
                            </div>
                        </div>

                        <button class="continue-btn" id="continueStep1" disabled>
                            Continue
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/>
                            </svg>
                        </button>
                    </div>

                    <!-- Step 2: Duration & Target -->
                    <div class="step-container" id="step2">
                        <div class="goal-summary">
                            <div class="goal-summary-icon" id="summaryIcon" style="background: rgba(37, 99, 235, 0.1); color: #2563EB;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"/>
                                </svg>
                            </div>
                            <div class="goal-summary-text">
                                <div class="goal-summary-name" id="summaryName">Home Fund</div>
                                <div class="goal-summary-meta">Set your timeline</div>
                            </div>
                        </div>

                        <div class="duration-section">
                            <div class="section-label">When do you need it?</div>

                            <div class="duration-display">
                                <div class="duration-value" id="durationValue">3 years</div>
                                <div class="duration-label">Investment Duration</div>
                            </div>

                            <input type="range" class="duration-slider" id="durationSlider" min="0.5" max="10" step="0.5" value="3">
                            <div class="duration-range">
                                <span>6 months</span>
                                <span>10 years</span>
                            </div>
                        </div>

                        <div class="section-label">Target amount (optional)</div>
                        <div class="target-input-wrapper">
                            <span class="currency-symbol">â‚¹</span>
                            <input type="tel" class="target-input" id="targetInput" placeholder="Enter target amount">
                        </div>

                        <div class="recommendation-card" id="recommendationCard">
                            <div class="recommendation-header">
                                <span class="recommendation-icon">ðŸ’¡</span>
                                <span class="recommendation-title">Recommended Fund</span>
                            </div>
                            <div class="recommendation-fund-name" id="recommendedFundName">Mid-Term Hybrid Fund</div>
                            <div class="recommendation-returns" id="recommendedReturns">Expected: 10-12% p.a.</div>
                            <div class="recommendation-description" id="recommendedDescription">Perfect for 2-5 year goals with balanced growth</div>
                        </div>

                        <button class="continue-btn" onclick="goToStep(3)">
                            Continue
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/>
                            </svg>
                        </button>
                    </div>

                    <!-- Step 3: Investment Setup -->
                    <div class="step-container" id="step3">
                        <div class="goal-summary">
                            <div class="goal-summary-icon" id="summaryIcon2" style="background: rgba(37, 99, 235, 0.1); color: #2563EB;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"/>
                                </svg>
                            </div>
                            <div class="goal-summary-text">
                                <div class="goal-summary-name" id="summaryName2">Home Fund</div>
                                <div class="goal-summary-meta" id="summaryMeta2">3 years</div>
                            </div>
                        </div>

                        <div class="section-label">How much can you invest?</div>

                        <div class="frequency-tabs">
                            <button class="frequency-btn" data-frequency="daily">Daily</button>
                            <button class="frequency-btn" data-frequency="weekly">Weekly</button>
                            <button class="frequency-btn active" data-frequency="monthly">Monthly</button>
                        </div>

                        <div class="amount-section">
                            <div class="amount-display">
                                <span class="currency-symbol">â‚¹</span>
                                <input type="tel" class="amount-input" id="amountInput" placeholder="5000" value="5000">
                            </div>

                            <div class="quick-amounts">
                                <button class="amount-btn" data-amount="2000">â‚¹2,000</button>
                                <button class="amount-btn active" data-amount="5000">â‚¹5,000</button>
                                <button class="amount-btn" data-amount="10000">â‚¹10,000</button>
                                <button class="amount-btn" data-amount="custom">Other</button>
                            </div>
                        </div>

                        <div class="projection-card">
                            <div class="projection-header">Expected Returns (<span id="projectionYears">3Y</span>)</div>
                            <div class="projection-amount" id="projectionTotal">â‚¹2,14,000</div>
                            <div class="projection-growth" id="projectionGrowth">+â‚¹34,000 (19% returns)</div>

                            <div class="projection-details">
                                <div class="detail-item">
                                    <div class="detail-label">Invested</div>
                                    <div class="detail-value" id="projectionInvested">â‚¹1,80,000</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Returns</div>
                                    <div class="detail-value" id="projectionReturns">â‚¹34,000</div>
                                </div>
                            </div>
                        </div>

                        <button class="continue-btn" onclick="createPot()">
                            ðŸŽ¯ Create Pot
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Goal Modal -->
    <div class="modal-overlay" id="customGoalModal">
        <div class="modal-content">
            <h3 class="modal-title">Create Custom Goal</h3>

            <div class="modal-input-group">
                <div class="modal-label">Goal Name</div>
                <input type="text" class="modal-input" id="customGoalName" placeholder="e.g., Gaming Setup">
            </div>

            <div class="modal-input-group">
                <div class="modal-label">Choose Icon</div>
                <div class="icon-grid">
                    <div class="icon-option" data-icon="cellphone" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="laptop" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M4,6H20V16H4M20,18A2,2 0 0,0 22,16V6C22,4.89 21.1,4 20,4H4C2.89,4 2,4.89 2,6V16A2,2 0 0,0 4,18H0V20H24V18H20Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M4,6H20V16H4M20,18A2,2 0 0,0 22,16V6C22,4.89 21.1,4 20,4H4C2.89,4 2,4.89 2,6V16A2,2 0 0,0 4,18H0V20H24V18H20Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="gamepad" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M6,9H8V11H10V13H8V15H6V13H4V11H6V9M18.5,9A1.5,1.5 0 0,1 20,10.5A1.5,1.5 0 0,1 18.5,12A1.5,1.5 0 0,1 17,10.5A1.5,1.5 0 0,1 18.5,9M15.5,12A1.5,1.5 0 0,1 17,13.5A1.5,1.5 0 0,1 15.5,15A1.5,1.5 0 0,1 14,13.5A1.5,1.5 0 0,1 15.5,12M17,5A7,7 0 0,1 24,12A7,7 0 0,1 17,19C15.04,19 13.27,18.2 12,16.9C10.73,18.2 8.96,19 7,19A7,7 0 0,1 0,12A7,7 0 0,1 7,5H17Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M6,9H8V11H10V13H8V15H6V13H4V11H6V9M18.5,9A1.5,1.5 0 0,1 20,10.5A1.5,1.5 0 0,1 18.5,12A1.5,1.5 0 0,1 17,10.5A1.5,1.5 0 0,1 18.5,9M15.5,12A1.5,1.5 0 0,1 17,13.5A1.5,1.5 0 0,1 15.5,15A1.5,1.5 0 0,1 14,13.5A1.5,1.5 0 0,1 15.5,12M17,5A7,7 0 0,1 24,12A7,7 0 0,1 17,19C15.04,19 13.27,18.2 12,16.9C10.73,18.2 8.96,19 7,19A7,7 0 0,1 0,12A7,7 0 0,1 7,5H17Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="guitar" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19.59,3L15,7.59L16.42,9L21,4.41L19.59,3M15,8L16,9L13,12L12,11L15,8M11,13L12,14L9,17L8,16L11,13M12.5,7.5C13.19,8.19 13.19,9.31 12.5,10C11.81,10.69 10.69,10.69 10,10C9.31,9.31 9.31,8.19 10,7.5C10.69,6.81 11.81,6.81 12.5,7.5M10.59,5L12,3.59L12.81,4.41L14.21,3L13.05,1.84C12.68,1.47 12.06,1.47 11.69,1.84L9.56,3.97L10.59,5M8.56,6C9.24,6.68 9.24,7.79 8.56,8.47C7.87,9.16 6.76,9.16 6.08,8.47C5.4,7.79 5.4,6.68 6.08,6C6.76,5.32 7.87,5.32 8.56,6M7.61,17.66C7.87,17.92 8.31,17.89 8.59,17.61C8.87,17.33 8.9,16.89 8.64,16.63C8.38,16.37 7.94,16.4 7.66,16.68C7.38,16.96 7.35,17.4 7.61,17.66M5.14,20.13C5.4,20.39 5.84,20.36 6.12,20.08C6.4,19.8 6.43,19.36 6.17,19.1C5.91,18.84 5.47,18.87 5.19,19.15C4.91,19.43 4.88,19.87 5.14,20.13M2.68,22.59C3.74,23.65 5.52,23.17 6.12,21.71C6.36,21.17 6.29,20.54 5.93,20.07L3.93,18.07C3.46,17.71 2.83,17.64 2.29,17.88C0.83,18.47 0.35,20.26 1.41,21.32L2.68,22.59Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19.59,3L15,7.59L16.42,9L21,4.41L19.59,3M15,8L16,9L13,12L12,11L15,8M11,13L12,14L9,17L8,16L11,13M12.5,7.5C13.19,8.19 13.19,9.31 12.5,10C11.81,10.69 10.69,10.69 10,10C9.31,9.31 9.31,8.19 10,7.5C10.69,6.81 11.81,6.81 12.5,7.5M10.59,5L12,3.59L12.81,4.41L14.21,3L13.05,1.84C12.68,1.47 12.06,1.47 11.69,1.84L9.56,3.97L10.59,5M8.56,6C9.24,6.68 9.24,7.79 8.56,8.47C7.87,9.16 6.76,9.16 6.08,8.47C5.4,7.79 5.4,6.68 6.08,6C6.76,5.32 7.87,5.32 8.56,6M7.61,17.66C7.87,17.92 8.31,17.89 8.59,17.61C8.87,17.33 8.9,16.89 8.64,16.63C8.38,16.37 7.94,16.4 7.66,16.68C7.38,16.96 7.35,17.4 7.61,17.66M5.14,20.13C5.4,20.39 5.84,20.36 6.12,20.08C6.4,19.8 6.43,19.36 6.17,19.1C5.91,18.84 5.47,18.87 5.19,19.15C4.91,19.43 4.88,19.87 5.14,20.13M2.68,22.59C3.74,23.65 5.52,23.17 6.12,21.71C6.36,21.17 6.29,20.54 5.93,20.07L3.93,18.07C3.46,17.71 2.83,17.64 2.29,17.88C0.83,18.47 0.35,20.26 1.41,21.32L2.68,22.59Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="camera" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="briefcase" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M10,2H14A2,2 0 0,1 16,4V6H20A2,2 0 0,1 22,8V19A2,2 0 0,1 20,21H4C2.89,21 2,20.1 2,19V8C2,6.89 2.89,6 4,6H8V4C8,2.89 8.89,2 10,2M14,6V4H10V6H14Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M10,2H14A2,2 0 0,1 16,4V6H20A2,2 0 0,1 22,8V19A2,2 0 0,1 20,21H4C2.89,21 2,20.1 2,19V8C2,6.89 2.89,6 4,6H8V4C8,2.89 8.89,2 10,2M14,6V4H10V6H14Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="airplane" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M21,16V14L13,9V3.5A1.5,1.5 0 0,0 11.5,2A1.5,1.5 0 0,0 10,3.5V9L2,14V16L10,13.5V19L8,20.5V22L11.5,21L15,22V20.5L13,19V13.5L21,16Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M21,16V14L13,9V3.5A1.5,1.5 0 0,0 11.5,2A1.5,1.5 0 0,0 10,3.5V9L2,14V16L10,13.5V19L8,20.5V22L11.5,21L15,22V20.5L13,19V13.5L21,16Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="run" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5,5.5C14.59,5.5 15.5,4.58 15.5,3.5C15.5,2.38 14.59,1.5 13.5,1.5C12.39,1.5 11.5,2.38 11.5,3.5C11.5,4.58 12.39,5.5 13.5,5.5M9.89,19.38L10.89,15L13,17V23H15V15.5L12.89,13.5L13.5,10.5C14.79,12 16.79,13 19,13V11C17.09,11 15.5,10 14.69,8.58L13.69,7C13.29,6.38 12.69,6 12,6C11.69,6 11.5,6.08 11.19,6.08L6,8.28V13H8V9.58L9.79,8.88L8.19,17L3.29,16L2.89,18L9.89,19.38Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5,5.5C14.59,5.5 15.5,4.58 15.5,3.5C15.5,2.38 14.59,1.5 13.5,1.5C12.39,1.5 11.5,2.38 11.5,3.5C11.5,4.58 12.39,5.5 13.5,5.5M9.89,19.38L10.89,15L13,17V23H15V15.5L12.89,13.5L13.5,10.5C14.79,12 16.79,13 19,13V11C17.09,11 15.5,10 14.69,8.58L13.69,7C13.29,6.38 12.69,6 12,6C11.69,6 11.5,6.08 11.19,6.08L6,8.28V13H8V9.58L9.79,8.88L8.19,17L3.29,16L2.89,18L9.89,19.38Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="soccer" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M13,9.94L14.06,15.13L11.97,16.5L9.91,15.13L11,9.94M13,7.5L12,2L11,7.5M18.06,8.94L13.81,7.5L17,4.5M18.94,10L15.94,12.5L14.06,7.5M15.94,13.5L18.94,16L13.81,17.5M11.97,17.5L6.06,16L9.06,13.5M5.06,10L10.19,7.5L8.31,12.5M10.19,17.5L5.94,8.94L7,4.5Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M13,9.94L14.06,15.13L11.97,16.5L9.91,15.13L11,9.94M13,7.5L12,2L11,7.5M18.06,8.94L13.81,7.5L17,4.5M18.94,10L15.94,12.5L14.06,7.5M15.94,13.5L18.94,16L13.81,17.5M11.97,17.5L6.06,16L9.06,13.5M5.06,10L10.19,7.5L8.31,12.5M10.19,17.5L5.94,8.94L7,4.5Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="palette" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M14.5,8A1.5,1.5 0 0,1 13,6.5A1.5,1.5 0 0,1 14.5,5A1.5,1.5 0 0,1 16,6.5A1.5,1.5 0 0,1 14.5,8M9.5,8A1.5,1.5 0 0,1 8,6.5A1.5,1.5 0 0,1 9.5,5A1.5,1.5 0 0,1 11,6.5A1.5,1.5 0 0,1 9.5,8M6.5,12A1.5,1.5 0 0,1 5,10.5A1.5,1.5 0 0,1 6.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 6.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A1.5,1.5 0 0,0 13.5,19.5C13.5,19.11 13.35,18.76 13.11,18.5C12.88,18.23 12.73,17.88 12.73,17.5A1.5,1.5 0 0,1 14.23,16H16A5,5 0 0,0 21,11C21,6.58 16.97,3 12,3Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M14.5,8A1.5,1.5 0 0,1 13,6.5A1.5,1.5 0 0,1 14.5,5A1.5,1.5 0 0,1 16,6.5A1.5,1.5 0 0,1 14.5,8M9.5,8A1.5,1.5 0 0,1 8,6.5A1.5,1.5 0 0,1 9.5,5A1.5,1.5 0 0,1 11,6.5A1.5,1.5 0 0,1 9.5,8M6.5,12A1.5,1.5 0 0,1 5,10.5A1.5,1.5 0 0,1 6.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 6.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A1.5,1.5 0 0,0 13.5,19.5C13.5,19.11 13.35,18.76 13.11,18.5C12.88,18.23 12.73,17.88 12.73,17.5A1.5,1.5 0 0,1 14.23,16H16A5,5 0 0,0 21,11C21,6.58 16.97,3 12,3Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="book" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18,22A2,2 0 0,0 20,20V4C20,2.89 19.1,2 18,2H12V9L9.5,7.5L7,9V2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18,22A2,2 0 0,0 20,20V4C20,2.89 19.1,2 18,2H12V9L9.5,7.5L7,9V2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="home" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="car" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M5,11L6.5,6.5H17.5L19,11M17.5,16A1.5,1.5 0 0,1 16,14.5A1.5,1.5 0 0,1 17.5,13A1.5,1.5 0 0,1 19,14.5A1.5,1.5 0 0,1 17.5,16M6.5,16A1.5,1.5 0 0,1 5,14.5A1.5,1.5 0 0,1 6.5,13A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 6.5,16M18.92,6C18.72,5.42 18.16,5 17.5,5H6.5C5.84,5 5.28,5.42 5.08,6L3,12V20A1,1 0 0,0 4,21H5A1,1 0 0,0 6,20V19H18V20A1,1 0 0,0 19,21H20A1,1 0 0,0 21,20V12L18.92,6Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M5,11L6.5,6.5H17.5L19,11M17.5,16A1.5,1.5 0 0,1 16,14.5A1.5,1.5 0 0,1 17.5,13A1.5,1.5 0 0,1 19,14.5A1.5,1.5 0 0,1 17.5,16M6.5,16A1.5,1.5 0 0,1 5,14.5A1.5,1.5 0 0,1 6.5,13A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 6.5,16M18.92,6C18.72,5.42 18.16,5 17.5,5H6.5C5.84,5 5.28,5.42 5.08,6L3,12V20A1,1 0 0,0 4,21H5A1,1 0 0,0 6,20V19H18V20A1,1 0 0,0 19,21H20A1,1 0 0,0 21,20V12L18.92,6Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="ring" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M16,9H19L14,16M10,9H14L12,17.5M5,9H8L10,16M15,4L12,2L9,4L6,2L3,4L5.5,9H18.5L21,4L18,2L15,4Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M16,9H19L14,16M10,9H14L12,17.5M5,9H8L10,16M15,4L12,2L9,4L6,2L3,4L5.5,9H18.5L21,4L18,2L15,4Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="school" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z"/></svg>
                    </div>
                    <div class="icon-option" data-icon="shield" data-icon-svg='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.1 16,12.7V16.2C16,16.8 15.4,17.3 14.8,17.3H9.2C8.6,17.3 8,16.8 8,16.2V12.8C8,12.2 8.6,11.6 9.2,11.6V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,9.5V11.5H13.5V9.5C13.5,8.7 12.8,8.2 12,8.2Z"/></svg>'>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.1 16,12.7V16.2C16,16.8 15.4,17.3 14.8,17.3H9.2C8.6,17.3 8,16.8 8,16.2V12.8C8,12.2 8.6,11.6 9.2,11.6V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,9.5V11.5H13.5V9.5C13.5,8.7 12.8,8.2 12,8.2Z"/></svg>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" onclick="closeCustomModal()">Cancel</button>
                <button class="modal-btn modal-btn-done" onclick="saveCustomGoal()">Done</button>
            </div>
        </div>
        <!-- iPhone Home Indicator -->
        <div class="iphone-home-indicator"></div>
    </div>

    <script>
        // Icon library - MDI icons
        const iconLibrary = {
            'home': '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"/></svg>',
            'car': '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M5,11L6.5,6.5H17.5L19,11M17.5,16A1.5,1.5 0 0,1 16,14.5A1.5,1.5 0 0,1 17.5,13A1.5,1.5 0 0,1 19,14.5A1.5,1.5 0 0,1 17.5,16M6.5,16A1.5,1.5 0 0,1 5,14.5A1.5,1.5 0 0,1 6.5,13A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 6.5,16M18.92,6C18.72,5.42 18.16,5 17.5,5H6.5C5.84,5 5.28,5.42 5.08,6L3,12V20A1,1 0 0,0 4,21H5A1,1 0 0,0 6,20V19H18V20A1,1 0 0,0 19,21H20A1,1 0 0,0 21,20V12L18.92,6Z"/></svg>',
            'ring': '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M16,9H19L14,16M10,9H14L12,17.5M5,9H8L10,16M15,4L12,2L9,4L6,2L3,4L5.5,9H18.5L21,4L18,2L15,4Z"/></svg>',
            'school': '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z"/></svg>',
            'shield': '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.1 16,12.7V16.2C16,16.8 15.4,17.3 14.8,17.3H9.2C8.6,17.3 8,16.8 8,16.2V12.8C8,12.2 8.6,11.6 9.2,11.6V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,9.5V11.5H13.5V9.5C13.5,8.7 12.8,8.2 12,8.2Z"/></svg>',
            'trending-up': '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M16,6L18.29,8.29L13.41,13.17L9.41,9.17L2,16.59L3.41,18L9.41,12L13.41,16L19.71,9.71L22,12V6H16Z"/></svg>',
            'beach': '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M13.13,14.56L14.56,13.13L21,19.57L19.57,21M7,3C8.11,3 9,3.89 9,5H15A2,2 0 0,1 17,7V21H3V7A2,2 0 0,1 5,5C5,3.89 5.89,3 7,3M7,5A1,1 0 0,0 6,6A1,1 0 0,0 7,7A1,1 0 0,0 8,6A1,1 0 0,0 7,5M18.66,2.41L20.08,3.83L15.08,8.83L13.66,7.41"/></svg>',
            'plus': '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/></svg>'
        };

        // Pot data state
        let potData = {
            name: '',
            icon: '',
            color: '',
            duration: 3,
            targetAmount: null,
            frequency: 'monthly',
            sipAmount: 5000,
            annualRate: 11
        };

        let currentStep = 1;

        // Step 1: Goal Selection
        document.querySelectorAll('.goal-card').forEach(card => {
            card.addEventListener('click', function() {
                const goal = this.dataset.goal;

                if (goal === 'custom') {
                    openCustomModal();
                    return;
                }

                // Remove previous selection
                document.querySelectorAll('.goal-card').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');

                // Update pot data
                potData.name = this.querySelector('.goal-name').textContent;
                potData.icon = this.dataset.icon;
                potData.color = this.dataset.color;

                // Enable continue button
                document.getElementById('continueStep1').disabled = false;
            });
        });

        document.getElementById('continueStep1').addEventListener('click', function() {
            if (!this.disabled) {
                goToStep(2);
            }
        });

        // Custom Goal Modal
        function openCustomModal() {
            document.getElementById('customGoalModal').classList.add('active');
        }

        function closeCustomModal() {
            document.getElementById('customGoalModal').classList.remove('active');
            document.getElementById('customGoalName').value = '';
            document.querySelectorAll('.icon-option').forEach(opt => opt.classList.remove('selected'));
        }

        document.querySelectorAll('.icon-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.icon-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });

        function saveCustomGoal() {
            const name = document.getElementById('customGoalName').value.trim();
            const selectedIcon = document.querySelector('.icon-option.selected');

            if (!name || !selectedIcon) {
                alert('Please enter a name and select an icon');
                return;
            }

            potData.name = name;
            potData.icon = selectedIcon.dataset.iconSvg; // Store SVG markup
            potData.color = '#6B7280';

            closeCustomModal();

            // Mark custom card as selected
            document.querySelectorAll('.goal-card').forEach(c => c.classList.remove('selected'));
            document.querySelector('[data-goal="custom"]').classList.add('selected');

            // Enable continue button
            document.getElementById('continueStep1').disabled = false;
        }

        // Step 2: Duration & Target
        const durationSlider = document.getElementById('durationSlider');
        const durationValue = document.getElementById('durationValue');

        durationSlider.addEventListener('input', function() {
            const value = parseFloat(this.value);
            potData.duration = value;

            if (value < 1) {
                durationValue.textContent = `${Math.round(value * 12)} months`;
            } else if (value === 1) {
                durationValue.textContent = '1 year';
            } else {
                durationValue.textContent = `${value} years`;
            }

            updateFundRecommendation();
        });

        function updateFundRecommendation() {
            const duration = potData.duration;
            let fundName, returns, description, rate;

            if (duration <= 2) {
                fundName = 'Short-Term Debt Fund';
                returns = 'Expected: 6-8% p.a.';
                description = 'Low risk, stable returns for short-term goals';
                rate = 7;
            } else if (duration <= 5) {
                fundName = 'Mid-Term Hybrid Fund';
                returns = 'Expected: 10-12% p.a.';
                description = 'Perfect for 2-5 year goals with balanced growth';
                rate = 11;
            } else {
                fundName = 'Long-Term Equity Fund';
                returns = 'Expected: 12-15% p.a.';
                description = 'High growth potential for long-term wealth creation';
                rate = 13.5;
            }

            potData.annualRate = rate;

            document.getElementById('recommendedFundName').textContent = fundName;
            document.getElementById('recommendedReturns').textContent = returns;
            document.getElementById('recommendedDescription').textContent = description;
        }

        document.getElementById('targetInput').addEventListener('input', function() {
            const value = this.value.replace(/[^0-9]/g, '');
            this.value = value;
            potData.targetAmount = value ? parseInt(value) : null;
        });

        // Step 3: Investment Setup
        document.querySelectorAll('.frequency-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.frequency-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                potData.frequency = this.dataset.frequency;
                updateProjection();
            });
        });

        const amountInput = document.getElementById('amountInput');

        amountInput.addEventListener('input', function() {
            const value = this.value.replace(/[^0-9]/g, '');
            this.value = value;
            potData.sipAmount = parseInt(value) || 0;

            // Update active quick amount button
            document.querySelectorAll('.amount-btn').forEach(b => b.classList.remove('active'));
            const matchingBtn = document.querySelector(`[data-amount="${value}"]`);
            if (matchingBtn) {
                matchingBtn.classList.add('active');
            }

            updateProjection();
        });

        document.querySelectorAll('.amount-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const amount = this.dataset.amount;

                if (amount === 'custom') {
                    amountInput.focus();
                    return;
                }

                document.querySelectorAll('.amount-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                amountInput.value = amount;
                potData.sipAmount = parseInt(amount);
                updateProjection();
            });
        });

        function calculateSIPReturns(amount, frequency, duration, annualRate) {
            const monthlyRate = annualRate / 12 / 100;
            const months = duration * 12;

            let paymentsPerMonth;
            if (frequency === 'daily') paymentsPerMonth = 30;
            else if (frequency === 'weekly') paymentsPerMonth = 4;
            else paymentsPerMonth = 1;

            const adjustedAmount = amount * paymentsPerMonth;

            // Future value of SIP
            const fv = adjustedAmount * (((Math.pow(1 + monthlyRate, months) - 1) / monthlyRate) * (1 + monthlyRate));
            const invested = adjustedAmount * months;
            const returns = fv - invested;

            return {
                totalValue: Math.round(fv),
                invested: Math.round(invested),
                returns: Math.round(returns),
                returnPercent: Math.round((returns / invested) * 100)
            };
        }

        function formatCurrency(amount) {
            return 'â‚¹' + amount.toLocaleString('en-IN');
        }

        function updateProjection() {
            const result = calculateSIPReturns(
                potData.sipAmount,
                potData.frequency,
                potData.duration,
                potData.annualRate
            );

            document.getElementById('projectionTotal').textContent = formatCurrency(result.totalValue);
            document.getElementById('projectionGrowth').textContent = `+${formatCurrency(result.returns)} (${result.returnPercent}% returns)`;
            document.getElementById('projectionInvested').textContent = formatCurrency(result.invested);
            document.getElementById('projectionReturns').textContent = formatCurrency(result.returns);

            const years = potData.duration >= 1 ? `${potData.duration}Y` : `${Math.round(potData.duration * 12)}M`;
            document.getElementById('projectionYears').textContent = years;
        }

        // Navigation
        function goToStep(step) {
            // Hide all steps
            document.querySelectorAll('.step-container').forEach(s => s.classList.remove('active'));

            // Show target step
            document.getElementById(`step${step}`).classList.add('active');

            // Update step indicator
            document.getElementById('stepIndicator').textContent = `Step ${step}/3`;
            currentStep = step;

            // Update summary in steps 2 and 3
            if (step >= 2) {
                // Get the icon SVG - either from library (predefined) or directly (custom)
                const iconSvg = iconLibrary[potData.icon] || potData.icon;

                // Calculate RGBA background with 10% opacity
                const hexToRgba = (hex, opacity) => {
                    const r = parseInt(hex.slice(1, 3), 16);
                    const g = parseInt(hex.slice(3, 5), 16);
                    const b = parseInt(hex.slice(5, 7), 16);
                    return `rgba(${r}, ${g}, ${b}, ${opacity})`;
                };

                const iconBg = hexToRgba(potData.color, 0.1);
                const iconStyle = `background: ${iconBg}; color: ${potData.color};`;

                // Update Step 2 summary
                const summaryIcon = document.getElementById('summaryIcon');
                summaryIcon.style.cssText = iconStyle;
                summaryIcon.innerHTML = iconSvg;
                document.getElementById('summaryName').textContent = potData.name + ' Fund';

                if (step === 3) {
                    // Update Step 3 summary
                    const summaryIcon2 = document.getElementById('summaryIcon2');
                    summaryIcon2.style.cssText = iconStyle;
                    summaryIcon2.innerHTML = iconSvg;
                    document.getElementById('summaryName2').textContent = potData.name + ' Fund';

                    const durationText = potData.duration >= 1 ?
                        `${potData.duration} year${potData.duration > 1 ? 's' : ''}` :
                        `${Math.round(potData.duration * 12)} months`;
                    document.getElementById('summaryMeta2').textContent = durationText;

                    updateProjection();
                }
            }
        }

        function goBack() {
            if (currentStep > 1) {
                goToStep(currentStep - 1);
            } else {
                window.location.href = 'index.html';
            }
        }

        function createPot() {
            console.log('Creating pot with data:', potData);

            // Show success message and redirect
            alert(`ðŸŽ‰ Success!\n\n${potData.name} Fund created!\nTarget: ${potData.duration >= 1 ? potData.duration + ' years' : Math.round(potData.duration * 12) + ' months'}\nSIP: â‚¹${potData.sipAmount} ${potData.frequency}`);

            // Redirect to homepage
            window.location.href = 'index.html';
        }

        // Initialize
        updateFundRecommendation();
    </script>
    <script src="assets/js/iphone-toggle.js"></script>
</body>
</html>
